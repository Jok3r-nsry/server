(function(t,e,n){"use strict";var i=function(t,e,n){n=m.extend({},m.options,n);var r=m.runValidations(t,e,n);if(r.some(function(t){return m.isPromise(t.error)}))throw new Error("Use validate.async if you want support for promises");return i.processValidationResults(r,n)},m=i;m.extend=function(n){return[].slice.call(arguments,1).forEach(function(t){for(var e in t)n[e]=t[e]}),n},m.extend(i,{version:{major:0,minor:12,patch:0,metadata:null,toString:function(){var t=m.format("%{major}.%{minor}.%{patch}",m.version);return m.isEmpty(m.version.metadata)||(t+="+"+m.version.metadata),t}},Promise:"undefined"!=typeof Promise?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(t,e,n){var r,i,o,s,a,u,f,l=[];for(r in(m.isDomElement(t)||m.isJqueryElement(t))&&(t=m.collectFormValues(t)),e)for(i in o=m.getDeepObjectValue(t,r),s=m.result(e[r],o,t,r,n,e)){if(!(a=m.validators[i]))throw f=m.format("Unknown validator %{name}",{name:i}),new Error(f);u=s[i],(u=m.result(u,o,t,r,n,e))&&l.push({attribute:r,value:o,validator:i,globalOptions:n,attributes:t,options:u,error:a.call(a,o,u,r,t,n)})}return l},processValidationResults:function(t,e){t=m.pruneEmptyErrors(t,e),t=m.expandMultipleErrors(t,e),t=m.convertErrorMessages(t,e);var n=e.format||"grouped";if("function"!=typeof m.formatters[n])throw new Error(m.format("Unknown format %{format}",e));return t=m.formatters[n](t),m.isEmpty(t)?void 0:t},async:function(r,i,o){var s=(o=m.extend({},m.async.options,o)).wrapErrors||function(t){return t};!1!==o.cleanAttributes&&(r=m.cleanAttributes(r,i));var a=m.runValidations(r,i,o);return new m.Promise(function(e,n){m.waitForResults(a).then(function(){var t=m.processValidationResults(a,o);t?n(new s(t,o,r,i)):e(r)},function(t){n(t)})})},single:function(t,e,n){return n=m.extend({},m.single.options,n,{format:"flat",fullMessages:!1}),m({single:t},{single:e},n)},waitForResults:function(t){return t.reduce(function(t,e){return m.isPromise(e.error)?t.then(function(){return e.error.then(function(t){e.error=t||null})}):t},new m.Promise(function(t){t()}))},result:function(t){var e=[].slice.call(arguments,1);return"function"==typeof t&&(t=t.apply(null,e)),t},isNumber:function(t){return"number"==typeof t&&!isNaN(t)},isFunction:function(t){return"function"==typeof t},isInteger:function(t){return m.isNumber(t)&&t%1==0},isBoolean:function(t){return"boolean"==typeof t},isObject:function(t){return t===Object(t)},isDate:function(t){return t instanceof Date},isDefined:function(t){return null!=t},isPromise:function(t){return!!t&&m.isFunction(t.then)},isJqueryElement:function(t){return t&&m.isString(t.jquery)},isDomElement:function(t){return!!(t&&t.querySelectorAll&&t.querySelector)&&(!(!m.isObject(document)||t!==document)||("object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName))},isEmpty:function(t){var e;if(!m.isDefined(t))return!0;if(m.isFunction(t))return!1;if(m.isString(t))return m.EMPTY_STRING_REGEXP.test(t);if(m.isArray(t))return 0===t.length;if(m.isDate(t))return!1;if(m.isObject(t)){for(e in t)return!1;return!0}return!1},format:m.extend(function(t,r){return m.isString(t)?t.replace(m.format.FORMAT_REGEXP,function(t,e,n){return"%"===e?"%{"+n+"}":String(r[n])}):t},{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(t){return m.isNumber(t)?100*t%1==0?""+t:parseFloat(Math.round(100*t)/100).toFixed(2):m.isArray(t)?t.map(function(t){return m.prettify(t)}).join(", "):m.isObject(t)?t.toString():(t=""+t).replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,function(t,e,n){return e+" "+n.toLowerCase()}).toLowerCase()},stringifyValue:function(t,e){return(e&&e.prettify||m.prettify)(t)},isString:function(t){return"string"==typeof t},isArray:function(t){return"[object Array]"==={}.toString.call(t)},isHash:function(t){return m.isObject(t)&&!m.isArray(t)&&!m.isFunction(t)},contains:function(t,e){return!!m.isDefined(t)&&(m.isArray(t)?-1!==t.indexOf(e):e in t)},unique:function(t){return m.isArray(t)?t.filter(function(t,e,n){return n.indexOf(t)==e}):t},forEachKeyInKeypath:function(t,e,n){if(m.isString(e)){var r,i="",o=!1;for(r=0;r<e.length;++r)switch(e[r]){case".":o?(o=!1,i+="."):(t=n(t,i,!1),i="");break;case"\\":o?(o=!1,i+="\\"):o=!0;break;default:o=!1,i+=e[r]}return n(t,i,!0)}},getDeepObjectValue:function(t,e){return m.isObject(t)?m.forEachKeyInKeypath(t,e,function(t,e){return m.isObject(t)?t[e]:void 0}):void 0},collectFormValues:function(t,e){var n,r,i,o,s,a,u={};if(m.isJqueryElement(t)&&(t=t[0]),!t)return u;for(e=e||{},o=t.querySelectorAll("input[data-required], textarea[data-required]"),n=0;n<o.length;++n)i=o.item(n),m.isDefined(i.getAttribute("data-ignored"))||(name=i.name.replace(/\./g,"\\\\."),a=m.sanitizeFormValue(i.value,e),"number"===i.type?a=a?+a:null:"checkbox"===i.type?i.attributes.value?i.checked||(a=u[name]||null):a=i.checked:"radio"===i.type&&(i.checked||(a=u[name]||null)),u[name]=a);for(o=t.querySelectorAll("select[data-required]"),n=0;n<o.length;++n)if(i=o.item(n),!m.isDefined(i.getAttribute("data-ignored"))){if(i.multiple)for(r in a=[],i.options)(s=i.options[r])&&s.selected&&a.push(m.sanitizeFormValue(s.value,e));else{var f=void 0!==i.options[i.selectedIndex]?i.options[i.selectedIndex].value:"";a=m.sanitizeFormValue(f,e)}u[i.name]=a}return u},sanitizeFormValue:function(t,e){return e.trim&&m.isString(t)&&(t=t.trim()),!1!==e.nullify&&""===t?null:t},capitalize:function(t){return m.isString(t)?t[0].toUpperCase()+t.slice(1):t},pruneEmptyErrors:function(t){return t.filter(function(t){return!m.isEmpty(t.error)})},expandMultipleErrors:function(t){var n=[];return t.forEach(function(e){m.isArray(e.error)?e.error.forEach(function(t){n.push(m.extend({},e,{error:t}))}):n.push(e)}),n},convertErrorMessages:function(t,n){var r=[],i=(n=n||{}).prettify||m.prettify;return t.forEach(function(t){var e=m.result(t.error,t.value,t.attribute,t.options,t.attributes,t.globalOptions);return m.isString(e)?("^"===e[0]?e=e.slice(1):!1!==n.fullMessages&&(e=m.capitalize(i(t.attribute))+" "+e),e=e.replace(/\\\^/g,"^"),e=m.format(e,{value:m.stringifyValue(t.value,n)}),void r.push(m.extend({},t,{error:e}))):void r.push(t)}),r},groupErrorsByAttribute:function(t){var n={};return t.forEach(function(t){var e=n[t.attribute];e?e.push(t):n[t.attribute]=[t]}),n},flattenErrorsToArray:function(t){return t.map(function(t){return t.error}).filter(function(t,e,n){return n.indexOf(t)===e})},cleanAttributes:function(t,e){function r(t,e,n){return m.isObject(t[e])?t[e]:t[e]=!!n||{}}return m.isObject(e)&&m.isObject(t)?function t(e,n){if(!m.isObject(e))return e;var r,i,o=m.extend({},e);for(i in e)r=n[i],m.isObject(r)?o[i]=t(o[i],r):r||delete o[i];return o}(t,e=function(t){var e,n={};for(e in t)t[e]&&m.forEachKeyInKeypath(n,e,r);return n}(e)):{}},exposeModule:function(t,e,n,r,i){n?(r&&r.exports&&(n=r.exports=t),n.validate=t):(e.validate=t).isFunction(i)&&i.amd&&i([],function(){return t})},warn:function(t){"undefined"!=typeof console&&console.warn&&console.warn("[validate.js] "+t)},error:function(t){"undefined"!=typeof console&&console.error&&console.error("[validate.js] "+t)}}),i.validators={presence:function(t,e){return(!1!==(e=m.extend({},this.options,e)).allowEmpty?!m.isDefined(t):m.isEmpty(t))?e.message||this.message||"can't be blank":void 0},length:function(t,e,n){if(m.isDefined(t)){var r,i=(e=m.extend({},this.options,e)).is,o=e.maximum,s=e.minimum,a=[],u=(t=(e.tokenizer||function(t){return t})(t)).length;return m.isNumber(u)?(m.isNumber(i)&&u!==i&&(r=e.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",a.push(m.format(r,{count:i}))),m.isNumber(s)&&u<s&&(r=e.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",a.push(m.format(r,{count:s}))),m.isNumber(o)&&o<u&&(r=e.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",a.push(m.format(r,{count:o}))),0<a.length?e.message||a:void 0):(m.error(m.format("Attribute %{attr} has a non numeric value for `length`",{attr:n})),e.message||this.notValid||"has an incorrect length")}},numericality:function(t,e,n,r,i){if(m.isDefined(t)){var o,s,a=[],u={greaterThan:function(t,e){return e<t},greaterThanOrEqualTo:function(t,e){return e<=t},equalTo:function(t,e){return t===e},lessThan:function(t,e){return t<e},lessThanOrEqualTo:function(t,e){return t<=e},divisibleBy:function(t,e){return t%e==0}},f=(e=m.extend({},this.options,e)).prettify||i&&i.prettify||m.prettify;if(m.isString(t)&&e.strict){var l="^-?(0|[1-9]\\d*)";if(e.onlyInteger||(l+="(\\.\\d+)?"),l+="$",!new RegExp(l).test(t))return e.message||e.notValid||this.notValid||this.message||"must be a valid number"}if(!0!==e.noStrings&&m.isString(t)&&!m.isEmpty(t)&&(t=+t),!m.isNumber(t))return e.message||e.notValid||this.notValid||this.message||"is not a number";if(e.onlyInteger&&!m.isInteger(t))return e.message||e.notInteger||this.notInteger||this.message||"must be an integer";for(o in u)if(s=e[o],m.isNumber(s)&&!u[o](t,s)){var c="not"+m.capitalize(o),d=e[c]||this[c]||this.message||"must be %{type} %{count}";a.push(m.format(d,{count:s,type:f(o)}))}return e.odd&&t%2!=1&&a.push(e.notOdd||this.notOdd||this.message||"must be odd"),e.even&&t%2!=0&&a.push(e.notEven||this.notEven||this.message||"must be even"),a.length?e.message||a:void 0}},datetime:m.extend(function(t,e){if(!m.isFunction(this.parse)||!m.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(m.isDefined(t)){var n,r=[],i=(e=m.extend({},this.options,e)).earliest?this.parse(e.earliest,e):NaN,o=e.latest?this.parse(e.latest,e):NaN;return t=this.parse(t,e),isNaN(t)||e.dateOnly&&t%864e5!=0?(n=e.notValid||e.message||this.notValid||"must be a valid date",m.format(n,{value:arguments[0]})):(!isNaN(i)&&t<i&&(n=e.tooEarly||e.message||this.tooEarly||"must be no earlier than %{date}",n=m.format(n,{value:this.format(t,e),date:this.format(i,e)}),r.push(n)),!isNaN(o)&&o<t&&(n=e.tooLate||e.message||this.tooLate||"must be no later than %{date}",n=m.format(n,{date:this.format(o,e),value:this.format(t,e)}),r.push(n)),r.length?m.unique(r):void 0)}},{parse:null,format:null}),date:function(t,e){return e=m.extend({},e,{dateOnly:!0}),m.validators.datetime.call(m.validators.datetime,t,e)},format:function(t,e){(m.isString(e)||e instanceof RegExp)&&(e={pattern:e});var n,r=(e=m.extend({},this.options,e)).message||this.message||"is invalid",i=e.pattern;return m.isDefined(t)?m.isString(t)?(m.isString(i)&&(i=new RegExp(e.pattern,e.flags)),(n=i.exec(t))&&n[0].length==t.length?void 0:r):r:void 0},inclusion:function(t,e){if(m.isDefined(t)&&(m.isArray(e)&&(e={within:e}),e=m.extend({},this.options,e),!m.contains(e.within,t))){var n=e.message||this.message||"^%{value} is not included in the list";return m.format(n,{value:t})}},exclusion:function(t,e){if(m.isDefined(t)&&(m.isArray(e)&&(e={within:e}),e=m.extend({},this.options,e),m.contains(e.within,t))){var n=e.message||this.message||"^%{value} is restricted";return m.format(n,{value:t})}},email:m.extend(function(t,e){var n=(e=m.extend({},this.options,e)).message||this.message||"is not a valid email";if(m.isDefined(t))return m.isString(t)&&this.PATTERN.exec(t)?void 0:n},{PATTERN:/^[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z]{2,}$/i}),equality:function(t,e,n,r,i){if(m.isDefined(t)){m.isString(e)&&(e={attribute:e});var o=(e=m.extend({},this.options,e)).message||this.message||"is not equal to %{attribute}";if(m.isEmpty(e.attribute)||!m.isString(e.attribute))throw new Error("The attribute must be a non empty string");var s=m.getDeepObjectValue(r,e.attribute),a=e.comparator||function(t,e){return t===e},u=e.prettify||i&&i.prettify||m.prettify;return a(t,s,e,n,r)?void 0:m.format(o,{attribute:u(e.attribute)})}},url:function(t,e){if(m.isDefined(t)){var n=(e=m.extend({},this.options,e)).message||this.message||"is not a valid url",r=e.schemes||this.schemes||["http","https"],i=e.allowLocal||this.allowLocal||!1;if(!m.isString(t))return n;var o="^(?:(?:"+r.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",s="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";return i?s+="?":o+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",o+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+s+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",new RegExp(o,"i").exec(t)?void 0:n}}},i.formatters={detailed:function(t){return t},flat:m.flattenErrorsToArray,grouped:function(t){var e;for(e in t=m.groupErrorsByAttribute(t))t[e]=m.flattenErrorsToArray(t[e]);return t},constraint:function(t){var e;for(e in t=m.groupErrorsByAttribute(t))t[e]=t[e].map(function(t){return t.validator}).sort();return t}},i.exposeModule(i,this,t,e,n)}).call(this,"undefined"!=typeof exports?exports:null,"undefined"!=typeof module?module:null,"undefined"!=typeof define?define:null);
